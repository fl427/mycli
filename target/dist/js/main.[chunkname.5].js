"use strict";!function(t,o){if("object"==typeof exports&&"object"==typeof module)module.exports=o(require("react"),require("react-dom"));else if("function"==typeof define&&define.amd)define(["react","react-dom"],o);else{var i="object"==typeof exports?o(require("react"),require("react-dom")):o(t.react,t["react-dom"]);for(var f in i)("object"==typeof exports?exports:t)[f]=i[f]}}(window,(function(t,o){return(window.webpackChunkmasonry_photo_v1=window.webpackChunkmasonry_photo_v1||[]).push([[179],{242:function(t,o,i){i.r(o);var f=i(156),l=i.n(f),a=i(111),s=i.n(a),e=i(379),n=i.n(e),r=i(795),x=i.n(r),p=i(569),m=i.n(p),c=i(565),w=i.n(c),h=i(216),u=i.n(h),b=i(589),H=i.n(b),d=i(424),Z={};Z.styleTagTransform=H(),Z.setAttributes=w(),Z.insert=m().bind(null,"head"),Z.domAPI=x(),Z.insertStyleElement=u(),n()(d.Z,Z),d.Z&&d.Z.locals&&d.Z.locals;var M=i(861),D=i(885),g=i(982),A=i(757),V=i.n(A),G=i(671),B=i(144),v=new(function(){function t(){(0,G.Z)(this,t),this.map=new Map}return(0,B.Z)(t,[{key:"getInfo",value:function(t){return this.map.get(t)}},{key:"setInfo",value:function(t,o){this.map.set(t,o)}},{key:"has",value:function(t){return void 0!==this.map.get(t)}}]),t}()),W=function(){function t(o,i,f,l){(0,G.Z)(this,t),this.src=void 0,this.sourceWidth=void 0,this.sourceHeight=void 0,this.masonryWidth=void 0,this.masonryHeight=void 0,this.offsetY=void 0,this.offsetX=void 0,this.id=void 0,this.src=o,this.sourceWidth=null==f?void 0:f.sourceWidth,this.sourceHeight=null==f?void 0:f.sourceHeight,this.masonryWidth=null==f?void 0:f.masonryWidth,this.masonryHeight=null==f?void 0:f.masonryHeight,this.id=l}return(0,B.Z)(t,[{key:"setAttributes",value:function(t,o){this[t]=o}}]),t}(),j=i(217),Y={};Y.styleTagTransform=H(),Y.setAttributes=w(),Y.insert=m().bind(null,"head"),Y.domAPI=x(),Y.insertStyleElement=u(),n()(j.Z,Y),j.Z&&j.Z.locals&&j.Z.locals;var q=function(t){t.data,t.itemHeight;var o=t.className,i=t.image,a=(0,f.useRef)(null);return l().createElement("div",{ref:a,key:null==i?void 0:i.id,className:"".concat(o," card"),style:{width:"".concat(null==i?void 0:i.masonryWidth,"px"),height:"".concat(null==i?void 0:i.masonryHeight,"px"),transform:"translate(".concat(null==i?void 0:i.offsetX,"px, ").concat(null==i?void 0:i.offsetY,"px)")}},l().createElement("div",{className:"card-info"},l().createElement("h1",null,null==i?void 0:i.id),null==i?void 0:i.offsetY),l().createElement("img",{className:"card-img",src:null==i?void 0:i.src}))},J=["https://www.lilnong.top/static/img/avator/avator-0.jpg","https://www.lilnong.top/static/img/avator/avator-1.jpg","https://picsum.photos/id/1/200/300","https://picsum.photos/id/17/200/400","https://picsum.photos/id/18/200/100","https://picsum.photos/id/109/200/200","https://picsum.photos/id/1069/200/600","https://picsum.photos/id/12/200/200","https://picsum.photos/id/130/200/100","https://picsum.photos/id/203/200/100","https://picsum.photos/id/109/200/200","https://picsum.photos/id/11/200/100","https://images.unsplash.com/photo-1536329583941-14287ec6fc4e?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHwxfHx8ZW58MHx8fHw%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1644926566295-f2421386df89?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwzfHx8ZW58MHx8fHw%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1644761058126-33eded8935fc?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxMHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1644916081578-f86b7d7b04d5?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxNHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1621609764095-b32bbe35cf3a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHwxfHx8ZW58MHx8fHw%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645812579474-f15ff2ea57f0?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwyfHx8ZW58MHx8fHw%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645813945759-980897b868f1?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw1fHx8ZW58MHx8fHw%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645812260543-b6ececcbb787?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw5fHx8ZW58MHx8fHw%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1640622660606-001c39ac2319?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHwxMXx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1628926873090-fa4efaeba856?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxNHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1542897477-f1a0cb8e8ef0?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxOHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645742175891-9207e6a52e6f?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxOXx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645771729688-951e911d2625?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwyNHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645813945136-21d452af7f66?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwyNXx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645542563306-ef00dda7f4a0?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwzNHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645817744713-3f005cbd7deb?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw0NHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645812579356-c9a6788ae1a4?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw0M3x8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1643852582196-629a554e80b4?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw0NXx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645738888005-700544a473f1?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw0N3x8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645771917080-c95b330b7af0?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw0OHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1587502537745-84b86da1204f?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHw0OXx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645389411257-db4454bbb161?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw1Mnx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1640622658799-54e6039d189b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHw1NHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645810163864-744308caf5ed?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw1N3x8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645542491943-27d8b484228a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw2Mnx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645790314935-ec2fe8b2a238?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw3MHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1471897488648-5eae4ac6686b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHw3M3x8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645718170634-c4361826a978?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw3Nnx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1604537466158-719b1972feb8?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHw3OHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1622638382042-5b91b4e48864?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw3N3x8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1555918001-e20d10c2bc1c?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw3OXx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1638695807031-e2967423dff6?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw4Mnx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1644421439741-712c7fde7e95?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw4Nnx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645785538675-f81e7dbab4b4?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw5MXx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645785491720-f46a4965f125?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw5NXx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645777785010-56e3e3c73c7e?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw5Nnx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645781623039-bd136db1f8c9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxMDB8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645782219629-2951d38eaac5?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxMDZ8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645718170588-c34bd867f47c?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxMDV8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645767782024-f46dab0dab10?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxMTF8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1640622660914-4b56c79bb492?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHwxMTJ8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1640622308113-ca5d7b948515?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHwxMTd8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645661319887-d63dc097f4a6?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxMTl8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1637056005716-03d7a4d62c7a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxMjR8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645743714183-8317e6bef2b5?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxMjZ8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1536329583941-14287ec6fc4e?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHwxMzJ8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645707540860-dfd95efcaacc?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxNTh8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1627876680112-4071fd0e50f6?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxNTl8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1638695748600-380cdbf155d0?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxNjR8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645731505493-7a13123374fd?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxNjh8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1629374355292-bf46fb4a5ffc?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxNzF8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645724466808-3de0b5d91523?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxNzN8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1643288178515-8b4ba815313a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxNzh8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1632764992201-f8f0114c0263?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxODJ8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1618111415112-793c80d2fb3b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxODZ8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645661319387-3e61ec8205b4?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxOTF8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1638555063519-d009e6f3b28b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxODl8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1640622656891-04960a7aa678?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHwxOTB8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1640622300363-4f295638be2e?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHwxOTV8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645665028914-ccd2c7b5aafa?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwyMDF8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60","https://images.unsplash.com/photo-1645725539657-de3f3f4412b4?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwyMDZ8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60"],y=i(96),N={};N.styleTagTransform=H(),N.setAttributes=w(),N.insert=m().bind(null,"head"),N.domAPI=x(),N.insertStyleElement=u(),n()(y.Z,N),y.Z&&y.Z.locals&&y.Z.locals;var I=function(){var t=i.g.innerWidth;return{pageWidth:t,pageHeight:i.g.innerHeight,column:Math.floor(t/239)}},k=0,E=function(t){return new Promise((function(o){t.start<J.length?o(J.slice(t.start,t.end)):o(J.slice(t.start%J.length,t.start%J.length+10))}))},F=function(t,o){return new Promise((function(i,f){var l=t.length,a=[],s=0;t.forEach((function(f,e){return function(f){var e=new Image;e.src=t[f];var n=function(){++s===l&&i(a)};e.onload=function(){var i=o*(e.height/e.width),l=new W(t[f],e,{sourceWidth:e.width,sourceHeight:e.height,masonryWidth:o,masonryHeight:i},f+k);a[f]=l,n()},e.onerror=function(){a[f]=new W(""),n()},e.src=t[f]}(e)}))}))},O=function(){var t=(0,f.useRef)(null),o=(0,f.useState)([]),i=(0,D.Z)(o,2),a=i[0],s=i[1],e=(0,f.useState)(0),n=(0,D.Z)(e,2),r=(n[0],n[1]),x=document.body.clientHeight,p=Math.floor(x/100),m=(0,f.useState)([]),c=(0,D.Z)(m,2),w=c[0],h=c[1],u=(0,f.useState)(0),b=(0,D.Z)(u,2),H=b[0],d=b[1],Z=(0,f.useState)(0),A=(0,D.Z)(Z,2),G=A[0],B=A[1],W=(0,f.useState)(0),j=(0,D.Z)(W,2),Y=j[0],J=j[1],y=(0,f.useMemo)((function(){console.log("数据变化",G,Y,w);var t=Math.max(0,G-p),o=Math.min(w.length,Y+2*p);return w.slice(t,o)}),[G,p,w,Y]),N=(0,f.useCallback)((0,M.Z)(V().mark((function t(){var o,i,f,l,e,n,r,x,p,m,c;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O.current=!0,t.next=3,E({start:w.length,end:w.length+10});case 3:return o=t.sent,t.next=6,F(o,235);case 6:for(i=t.sent,k+=i.length,f=I(),l=f.pageWidth,e=f.column,n=(0,g.Z)(a),0===a.length&&(n=Array(e).fill(0)),r=0;r<i.length;r++)x=i[r],u=n,void 0,b=Math.min.apply(Math,(0,g.Z)(u)),p=u.indexOf(b),m=n[p]+10,x&&x.setAttributes("offsetY",m),c=(l-(239*e-4))/2+239*p,x&&x.setAttributes("offsetX",c),n[p]=m+(x.masonryHeight||0);s(n),h((function(t){return[].concat((0,g.Z)(t),(0,g.Z)(i))})),O.current=!1;case 15:case"end":return t.stop()}var u,b}),t)}))),[a,w]);(0,f.useEffect)((function(){N().then()}),[]);var O=(0,f.useRef)(!1),T=(0,f.useCallback)((0,M.Z)(V().mark((function o(){var i,f,l,s,e,n,p,m,c,h,u,b,H,Z,M;return V().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!(i=t.current)){o.next=17;break}if(f=i.scrollTop,l=i.scrollHeight,s=Math.floor(f/x),r(s),console.log("info",s,v.getInfo(s)),v.has(s))p=null===(e=v.getInfo(s))||void 0===e?void 0:e.startIdx,m=null===(n=v.getInfo(s))||void 0===n?void 0:n.endIdx,console.log("已经有了",p,m),B(p),J(m);else{for(H=null!==(c=null===(h=v.getInfo(s-1))||void 0===h?void 0:h.endIdx)&&void 0!==c?c:0,Z=null!==(u=null===(b=v.getInfo(s-1))||void 0===b?void 0:b.endIdx)&&void 0!==u?u:0,M=H+1;M<w.length;M++)(w[M].offsetY||1/0)<=x*(s+1)&&(Z=M);v.setInfo(s,{startIdx:H,endIdx:Z}),B(H),J(Z)}if(console.log("继续加载scroll",w.length,l-f,1.5*x),!(l-f<=1.5*x)){o.next=16;break}if(!O.current){o.next=13;break}return console.log("继续加载scroll正在添加"),o.abrupt("return");case 13:return console.log("继续加载-1",l-f,1.5*x,Math.max.apply(Math,(0,g.Z)(a))),o.next=16,N();case 16:d(l);case 17:case"end":return o.stop()}}),o)}))),[x,N,a,w]);return(0,f.useEffect)((function(){var o=t.current;return o&&o.addEventListener("scroll",T),function(){o&&o.removeEventListener("scroll",T)}}),[T]),l().createElement("div",{className:"masonry-page",ref:t},l().createElement("div",{className:"masonry",style:{height:"".concat(H,"px")}},l().createElement("div",{className:"masonry-list"},y.map((function(t){return l().createElement(q,{className:"masonry-list-item",key:t.id,image:t,itemHeight:100})})))))},T=function(){return l().createElement(O,null)};s().render(l().createElement(T,null),document.getElementById("root"))},217:function(t,o,i){var f=i(81),l=i.n(f),a=i(645),s=i.n(a)()(l());s.push([t.id,".card-info{position:absolute;left:0;top:0;color:red}.card-img{width:100%;height:100%}",""]),o.Z=s},96:function(t,o,i){var f=i(81),l=i.n(f),a=i(645),s=i.n(a)()(l());s.push([t.id,".masonry-page{text-align:center;height:100vh;width:100vw;overflow:scroll;position:relative}.masonry-page .masonry{position:relative;height:100%}.masonry-page .masonry-list{position:relative;height:100%}.masonry-page .masonry-list-item{position:absolute;left:0;top:0}",""]),o.Z=s},424:function(t,o,i){var f=i(81),l=i.n(f),a=i(645),s=i.n(a)()(l());s.push([t.id,"body {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\ncode {\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n    monospace;\n}\n",""]),o.Z=s},156:function(o){o.exports=t},111:function(t){t.exports=o}},function(t){return t.O(0,[26],(function(){return 242,t(t.s=242)})),t.O()}])}));